<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>App ‚Äî Racer Ready</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <header class="site-header">
        <div class="header-inner">
            <div class="brand" aria-hidden="true"></div>
            <div class="header-actions">
                <div class="profile-menu" data-role="profile-menu" aria-hidden="false">
                    <button class="profile-btn" aria-haspopup="true" aria-expanded="false"
                        aria-label="Open profile menu">
                        <span class="avatar">RR</span>
                    </button>
                    <div class="profile-dropdown hidden" role="menu" aria-hidden="true">
                        <a href="profile.html" role="menuitem" class="profile-link">Profile</a>
                        <button class="logout" role="menuitem">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Logo above side panel -->
    <div class="logo-above-panel">
        <img src="images/logo.png" alt="Racer Ready Logo" class="app-logo">
    </div>

    <!-- Left side translucent panel with action buttons -->
    <aside class="side-panel" aria-label="Actions">
        <nav class="side-nav">
            <button class="side-btn primary" data-section="home">Home</button>
            <button class="side-btn outline" data-section="build">Start Building</button>
            <button class="side-btn info" data-section="track-history">Track History</button>
            <button class="side-btn info" data-section="tire-history">Tire History</button>
            <button class="side-btn danger" data-section="saved">Saved Builds</button>
        </nav>
    </aside>

    <!-- Tagline above app container -->
    <div class="app-tagline">
        <h2>Your Dream.</h2>
        <h2>Your Race.</h2>
        <h2>Your Victory.</h2>
    </div>

    <main class="container app-container" role="main">
        <!-- Default instructions view -->
        <div class="app-section active" data-section-content="home">
            <div class="app-instructions">
                <div class="instruction-card" data-card="build">
                    <div class="instruction-icon">‚öô</div>
                    <h3>Start Building</h3>
                    <p>Create, customize, and fine-tune your kart configuration</p>
                </div>
                <div class="instruction-card" data-card="track-history">
                    <div class="instruction-icon">üèÅ</div>
                    <h3>Track History</h3>
                    <p>View and manage your track history records</p>
                </div>
                <div class="instruction-card" data-card="tire-history">
                    <div class="instruction-icon">üõû</div>
                    <h3>Tire History</h3>
                    <p>View and manage your tire usage and history</p>
                </div>
                <div class="instruction-card" data-card="saved">
                    <div class="instruction-icon">‚≠ê</div>
                    <h3>Saved Builds</h3>
                    <p>Access and manage your saved kart configurations</p>
                </div>
            </div>
        </div>

        <!-- Build Section -->
        <div class="app-section" data-section-content="build">
            <h2>Build & Tune Your Kart</h2>
            <p>Customize every aspect of your kart's performance</p>
            <div class="section-content">
                <!-- Choice Menu for Build Section (Initial) -->
                <div class="choice-buttons" id="build-choice-menu">
                    <button class="choice-btn" data-action="load-saved-build">
                        <span class="choice-icon">üìÇ</span>
                        <span class="choice-label">Load from Saved Build</span>
                    </button>
                    <button class="choice-btn" data-action="create-new-build">
                        <span class="choice-icon">‚ú®</span>
                        <span class="choice-label">Create New Build</span>
                    </button>
                </div>

                <!-- Category Selection Menu (Hidden initially) -->
                <div class="choice-buttons" id="build-category-menu" style="display: none;">
                    <button class="choice-btn" data-category="kart">
                        <span class="choice-icon">üèéÔ∏è</span>
                        <span class="choice-label">Kart Adjustments</span>
                    </button>
                    <button class="choice-btn" data-category="tire">
                        <span class="choice-icon">üõû</span>
                        <span class="choice-label">Tire Adjustments</span>
                    </button>
                </div>

                <!-- Build Setup Interface (Hidden initially) -->
                <div id="build-setup-interface" style="display: none;">
                <div class="settings-header">
                    <button class="back-btn" id="back-to-category">&larr; Back</button>
                    <h3 id="build-category-title">Adjustments</h3>
                    <button class="btn primary" onclick="saveBuild()" style="margin-left: auto;">üíæ Save Build</button>
                </div>
                <div class="setup-tabs">
                    <button class="setup-tab active" data-setup="frontend" data-category="kart">Front End</button>
                    <button class="setup-tab" data-setup="backend" data-category="kart">Rear End</button>
                    <button class="setup-tab" data-setup="weight" data-category="kart">Weight & Balance</button>
                    <button class="setup-tab" data-setup="chassis" data-category="kart">Chassis</button>
                    <button class="setup-tab" data-setup="tires" data-category="tire">Tires</button>
                    <button class="setup-tab" data-setup="drivetrain" data-category="kart">Drivetrain</button>
                </div>

                <div class="setup-content">
                    <!-- Front End Setup -->
                    <div class="setup-panel active" data-setup-panel="frontend">
                        <h3>Front End Setup</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Caster:</strong>
                                <input type="number" placeholder="Typical: 3-8¬∞" class="setup-input" min="-10" max="10">
                            </li>
                            <li>
                                <strong>Camber:</strong>
                                <input type="number" placeholder="Typical: -2 to 2¬∞" class="setup-input" min="-5"
                                    max="5">
                            </li>
                            <li>
                                <strong>Toe:</strong>
                                <input type="text" placeholder="e.g., 0-3mm toe-out" class="setup-input">
                            </li>
                            <li>
                                <strong>Ackermann Steering Geometry:</strong>
                                <input type="number" placeholder="Typical: 1-3¬∞" class="setup-input" min="0" max="10">
                            </li>
                            <li>
                                <strong>Front Ride Height:</strong>
                                <input type="number" placeholder="Typical: 10-30mm" class="setup-input" min="0"
                                    max="50">
                            </li>
                            <li>
                                <strong>Front Track Width:</strong>
                                <input type="number" placeholder="Typical: 130-160mm" class="setup-input" min="120"
                                    max="170">
                            </li>
                        </ul>
                    </div>

                    <!-- Rear End Setup -->
                    <div class="setup-panel" data-setup-panel="backend">
                        <h3>Rear End Setup</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Rear Track Width:</strong>
                                <input type="number" placeholder="Typical: 140-170mm" class="setup-input" min="130"
                                    max="180">
                            </li>
                            <li>
                                <strong>Rear Axle Height:</strong>
                                <input type="number" placeholder="Typical: 10-30mm" class="setup-input" min="0"
                                    max="50">
                            </li>
                            <li>
                                <strong>Rear Axle Hardness:</strong>
                                <input type="text" placeholder="e.g., Soft/Medium/Hard" class="setup-input">
                            </li>
                            <li>
                                <strong>Torsion Bars/Stiffeners (Rear):</strong>
                                <input type="text" placeholder="e.g., Installed/Removed" class="setup-input">
                            </li>
                        </ul>
                    </div>

                    <!-- Weight Distribution -->
                    <div class="setup-panel" data-setup-panel="weight">
                        <h3>Weight & Balance</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Nose Weight Percentage:</strong>
                                <input type="number" placeholder="Typical: 35-50%" class="setup-input" min="0"
                                    max="100">
                            </li>
                            <li>
                                <strong>Left Side Weight Percentage:</strong>
                                <input type="number" placeholder="Typical: 45-55%" class="setup-input" min="0"
                                    max="100">
                            </li>
                            <li>
                                <strong>Cross Weight Percentage (Bite):</strong>
                                <input type="number" placeholder="Typical: 45-55%" class="setup-input" min="0"
                                    max="100">
                            </li>
                            <li>
                                <strong>Driver/Seat Position:</strong>
                                <input type="text" placeholder="e.g., Centered, -20mm fore" class="setup-input">
                            </li>
                        </ul>
                    </div>

                    <!-- Chassis Stiffness -->
                    <div class="setup-panel" data-setup-panel="chassis">
                        <h3>Chassis Stiffness</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Front Torsion Bars/Stiffeners:</strong>
                                <input type="text" placeholder="e.g., Soft/Medium/Hard" class="setup-input">
                            </li>
                        </ul>
                    </div>

                    <!-- Tire Setup -->
                    <div class="setup-panel" data-setup-panel="tires">
                        <h3>Tire Adjustments</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Tire Pressure (PSI):</strong>
                                <input type="text" placeholder="e.g., LF: 1.1, RF: 1.3, LR: 1.2, RR: 1.4 PSI"
                                    class="setup-input">
                            </li>
                            <li>
                                <strong>Tire Stagger:</strong>
                                <input type="text" placeholder="e.g., Rear: +0.5in, Front: +0.3in" class="setup-input">
                            </li>
                            <li>
                                <strong>Tire Compound Selection:</strong>
                                <input type="text" placeholder="e.g., Soft, Medium, Hard" class="setup-input">
                            </li>
                            <li>
                                <strong>Tire Prep/Conditioning:</strong>
                                <input type="text" placeholder="e.g., Treated, Pre-mount, Siped" class="setup-input">
                            </li>
                        </ul>
                    </div>

                    <!-- Drivetrain & Engine -->
                    <div class="setup-panel" data-setup-panel="drivetrain">
                        <h3>Drivetrain & Engine</h3>
                        <ul class="setup-list">
                            <li>
                                <strong>Gearing (Sprocket/Clutch Changes):</strong>
                                <input type="number" placeholder="Typical: 50-80 teeth" class="setup-input" min="40"
                                    max="100">
                            </li>
                            <li>
                                <strong>Clutch Engagement RPM:</strong>
                                <input type="number" placeholder="Typical: 3000-7000 RPM" class="setup-input" min="2000"
                                    max="10000">
                            </li>
                            <li>
                                <strong>Clutch Material/Type:</strong>
                                <input type="text" placeholder="e.g., Drum, Disc" class="setup-input">
                            </li>
                        </ul>
                    </div>

                </div>
                </div>
            </div>
        </div>


        <!-- Track History Section -->
        <div class="app-section" data-section-content="track-history">
            <h2>Track History</h2>
            <p>View and manage your track history records.</p>
            <div class="section-content">
                <button class="btn primary" id="add-track-btn" style="margin-bottom: 16px;">Add Track</button>
                <div id="track-list" style="position: relative; z-index: 1;"></div>
            </div>
        </div>

        <!-- Add Track Section -->
        <div class="app-section" data-section-content="add-track">
            <button class="btn" onclick="backToTrackHistory()" style="margin-bottom: 16px;">‚Üê Back to Tracks</button>
            <h2>Add Track</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="track-name-input">Track Name:</label>
                    <input type="text" id="track-name-input" class="setup-input" placeholder="Enter track name..." style="max-width: 100%; margin-top: 8px;">
                    <label for="track-location-input" style="margin-top:12px;display:block;">Location:</label>
                    <input type="text" id="track-location-input" class="setup-input" placeholder="Enter location..." style="max-width: 100%; margin-top: 8px;">
                    <button class="btn primary" id="confirm-add-track-btn" style="margin-top: 16px;">Add Track</button>
                </div>
            </div>
        </div>

        <!-- Track Details Section -->
        <div class="app-section" data-section-content="track-details" style="display:none;">
            <div class="settings-header">
                <button class="back-btn" id="back-to-track-list">&larr; Back to Tracks</button>
                <h2 id="track-details-title">Track Details</h2>
            </div>
            <div class="section-content">
                <div style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;">
                    <button class="btn primary" id="add-day-btn" style="flex: 1; min-width: 150px;">üìÖ Add Day</button>
                    <button class="btn" id="track-settings-btn" style="flex: 1; min-width: 150px;">‚öôÔ∏è Track Settings</button>
                    <button class="btn" id="points-standings-btn" style="flex: 1; min-width: 150px;">üèÜ Points Standings</button>
                </div>
                <div id="day-list"></div>
            </div>
        </div>

        <!-- Day Entry Section -->
        <div class="app-section" data-section-content="day-entry" style="display:none;">
            <div class="settings-header">
                <button class="back-btn" id="back-to-track-details">&larr; Back to Track</button>
                <h2 id="day-entry-title">Day Entry</h2>
                <button class="btn primary" id="save-day-btn" style="margin-left: auto;">üíæ Save Day</button>
            </div>
            <div class="section-content">
                <h3>Track Conditions</h3>
                <ul class="setup-list">
                    <li>
                        <strong>Surface Condition:</strong>
                        <select id="surface-condition" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Wet/Slick">Wet/Slick</option>
                            <option value="Dry/Dusty">Dry/Dusty</option>
                            <option value="Tacky/Heavy">Tacky/Heavy</option>
                            <option value="Rubbered-in">Rubbered-in</option>
                        </select>
                    </li>
                    <li>
                        <strong>Moisture Content:</strong>
                        <select id="moisture-content" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Very Wet - muddy">Very Wet - muddy</option>
                            <option value="Moist - tacky">Moist - tacky</option>
                            <option value="Dry - dusty/slick">Dry - dusty/slick</option>
                        </select>
                    </li>
                    <li>
                        <strong>Grip Level:</strong>
                        <select id="grip-level" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High/Bitey">High/Bitey</option>
                        </select>
                    </li>
                    <li>
                        <strong>Groove Position:</strong>
                        <select id="groove-position" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Bottom Groove only">Bottom Groove only</option>
                            <option value="Top Groove">Top Groove</option>
                            <option value="Multiple Lanes">Multiple Lanes</option>
                        </select>
                    </li>
                    <li>
                        <strong>Surface Texture:</strong>
                        <select id="surface-texture" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Smooth">Smooth</option>
                            <option value="Bumpy">Bumpy</option>
                            <option value="Ruts">Ruts</option>
                        </select>
                    </li>
                </ul>
                <h3 style="margin-top:24px;">Atmospheric and Weather Conditions</h3>
                <ul class="setup-list">
                    <li>
                        <strong>Ambient Air Temperature:</strong>
                        <input type="text" id="air-temperature" class="setup-input" placeholder="e.g., 75¬∞F or 24¬∞C" style="margin-top:8px;">
                    </li>
                    <li>
                        <strong>Track Surface Temperature:</strong>
                        <input type="text" id="surface-temperature" class="setup-input" placeholder="e.g., 85¬∞F or 29¬∞C" style="margin-top:8px;">
                    </li>
                    <li>
                        <strong>Humidity:</strong>
                        <select id="humidity" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </li>
                    <li>
                        <strong>Time of Day:</strong>
                        <select id="time-of-day" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Day">Day</option>
                            <option value="Dusk">Dusk</option>
                            <option value="Night">Night</option>
                        </select>
                    </li>
                    <li>
                        <strong>Wind Conditions:</strong>
                        <input type="text" id="wind-conditions" class="setup-input" placeholder="e.g., Strong headwind on back straight" style="margin-top:8px;">
                    </li>
                    <li>
                        <strong>Points Earned:</strong>
                        <input type="number" id="points-earned" class="setup-input" placeholder="e.g., 100, 75, 50..." min="0" style="margin-top:8px;">
                    </li>
                </ul>
            </div>
        </div>

        <!-- View Day Section -->
        <div class="app-section" data-section-content="view-day" style="display:none;">
            <div class="settings-header">
                <button class="back-btn" id="back-from-view-day">&larr; Back to Track</button>
                <h2 id="view-day-title">Day Details</h2>
            </div>
            <div class="section-content" id="view-day-content">
                <!-- Content populated by JavaScript -->
            </div>
        </div>

        <!-- Edit Day Section -->
        <div class="app-section" data-section-content="edit-day" style="display:none;">
            <div class="settings-header">
                <button class="back-btn" id="back-from-edit-day">&larr; Back to Track</button>
                <h2 id="edit-day-title">Edit Day</h2>
                <button class="btn primary" id="save-edit-day-btn" style="margin-left: auto;">üíæ Save Changes</button>
            </div>
            <div class="section-content">
                <h3>Basic Information</h3>
                <ul class="setup-list">
                    <li>
                        <strong>Race Name:</strong>
                        <input type="text" id="edit-race-name" class="setup-input" placeholder="Enter race name..." style="margin-top:8px; max-width: 100%;">
                    </li>
                    <li>
                        <strong>Recording Date & Time:</strong>
                        <input type="datetime-local" id="edit-timestamp" class="setup-input" style="margin-top:8px; max-width: 100%;">
                    </li>
                </ul>
                <h3 style="margin-top:24px;">Track Conditions</h3>
                <ul class="setup-list">
                    <li>
                        <strong>Surface Condition:</strong>
                        <select id="edit-surface-condition" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Wet/Slick">Wet/Slick</option>
                            <option value="Dry/Dusty">Dry/Dusty</option>
                            <option value="Tacky/Heavy">Tacky/Heavy</option>
                            <option value="Rubbered-in">Rubbered-in</option>
                        </select>
                    </li>
                    <li>
                        <strong>Moisture Content:</strong>
                        <select id="edit-moisture-content" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Very Wet - muddy">Very Wet - muddy</option>
                            <option value="Moist - tacky">Moist - tacky</option>
                            <option value="Dry - dusty/slick">Dry - dusty/slick</option>
                        </select>
                    </li>
                    <li>
                        <strong>Grip Level:</strong>
                        <select id="edit-grip-level" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High/Bitey">High/Bitey</option>
                        </select>
                    </li>
                    <li>
                        <strong>Groove Position:</strong>
                        <select id="edit-groove-position" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Bottom Groove only">Bottom Groove only</option>
                            <option value="Top Groove">Top Groove</option>
                            <option value="Multiple Lanes">Multiple Lanes</option>
                        </select>
                    </li>
                    <li>
                        <strong>Surface Texture:</strong>
                        <select id="edit-surface-texture" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Smooth">Smooth</option>
                            <option value="Bumpy">Bumpy</option>
                            <option value="Ruts">Ruts</option>
                        </select>
                    </li>
                </ul>
                <h3 style="margin-top:24px;">Atmospheric and Weather Conditions</h3>
                <ul class="setup-list">
                    <li>
                        <strong>Ambient Air Temperature:</strong>
                        <input type="text" id="edit-air-temperature" class="setup-input" placeholder="e.g., 75¬∞F or 24¬∞C" style="margin-top:8px;">
                    </li>
                    <li>
                        <strong>Track Surface Temperature:</strong>
                        <input type="text" id="edit-surface-temperature" class="setup-input" placeholder="e.g., 85¬∞F or 29¬∞C" style="margin-top:8px;">
                    </li>
                    <li>
                        <strong>Humidity:</strong>
                        <select id="edit-humidity" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </li>
                    <li>
                        <strong>Time of Day:</strong>
                        <select id="edit-time-of-day" class="setup-input" style="margin-top:8px;">
                            <option value="">Select...</option>
                            <option value="Day">Day</option>
                            <option value="Dusk">Dusk</option>
                            <option value="Night">Night</option>
                        </select>
                    </li>
                    <li>
                        <strong>Wind Conditions:</strong>
                        <input type="text" id="edit-wind-conditions" class="setup-input" placeholder="e.g., Strong headwind on back straight" style="margin-top:8px;">
                    </li>
                </ul>
            </div>
        </div>

        <!-- Track Settings Section -->
        <div class="app-section" data-section-content="track-settings" style="display:none;">
            <button class="btn" onclick="backToTrackDetails()" style="margin-bottom: 16px;">‚Üê Back to Track</button>
            <h2 id="track-settings-title">Track Settings</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="track-settings-name">Track Name:</label>
                    <input type="text" id="track-settings-name" class="setup-input" placeholder="Track name..." style="max-width: 100%; margin-top: 8px;">
                    <label for="track-settings-location" style="margin-top:12px;display:block;">Location:</label>
                    <input type="text" id="track-settings-location" class="setup-input" placeholder="City, State/Country..." style="max-width: 100%; margin-top: 8px;">
                    <label for="track-settings-notes" style="margin-top:12px;display:block;">Notes:</label>
                    <textarea id="track-settings-notes" class="setup-input" placeholder="Additional notes about this track..." style="max-width: 100%; margin-top: 8px; min-height: 100px; resize: vertical;"></textarea>
                    <button class="btn primary" id="save-track-settings-btn" style="margin-top: 16px;">üíæ Save Settings</button>
                    <button class="btn" id="delete-track-btn" style="margin-top: 16px; margin-left: 8px; background: rgba(255,51,51,0.2); border-color: rgba(255,51,51,0.3);">üóëÔ∏è Delete Track</button>
                </div>
            </div>
        </div>

        <!-- Points Standings Section -->
        <div class="app-section" data-section-content="points-standings" style="display:none;">
            <button class="btn" onclick="backToTrackDetails()" style="margin-bottom: 16px;">‚Üê Back to Track</button>
            <h2 id="points-standings-title">Points Standings</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px; margin-bottom: 16px;">
                    <h3 style="margin: 0 0 8px 0; color: rgba(230,238,246,0.9);">Total Points: <span id="total-points-display">0</span></h3>
                </div>
                <div id="points-standings-list">
                    <!-- Race entries will be populated here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Tire History Section -->
        <div class="app-section" data-section-content="tire-history">
            <h2>Tire History</h2>
            <p>View and manage your tire usage and history.</p>
            <div class="section-content">
                <button class="btn primary" id="add-tire-set-btn" style="margin-bottom: 16px;">Add Set (1-4 Tires)</button>
                <div id="tire-set-list" style="position: relative; z-index: 1;"></div>
            </div>
        </div>

        <!-- Add Tire Set Section -->
        <div class="app-section" data-section-content="add-tire-set">
            <button class="btn" onclick="backToTireHistory()" style="margin-bottom: 16px;">‚Üê Back to Tire Sets</button>
            <h2>Add Tire Set</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="tire-set-name-input">Set Name:</label>
                    <input type="text" id="tire-set-name-input" class="setup-input" placeholder="e.g., Front Race Set, Spare Rears..." style="max-width: 100%; margin-top: 8px;">
                    <label for="tire-brand-input" style="margin-top:12px;display:block;">Brand:</label>
                    <input type="text" id="tire-brand-input" class="setup-input" placeholder="e.g., MG, Bridgestone, Hoosier..." style="max-width: 100%; margin-top: 8px;">
                    <label for="tire-model-input" style="margin-top:12px;display:block;">Tire Model:</label>
                    <input type="text" id="tire-model-input" class="setup-input" placeholder="e.g., Red, Yellow, CIK..." style="max-width: 100%; margin-top: 8px;">
                    <label for="tire-quantity-input" style="margin-top:12px;display:block;">Number of Tires in Set (1-4):</label>
                    <input type="number" id="tire-quantity-input" class="setup-input" placeholder="1-4" min="1" max="4" value="4" style="max-width: 100%; margin-top: 8px;">
                    <button class="btn primary" id="confirm-add-tire-set-btn" style="margin-top: 16px;">Add Tire Set</button>
                </div>
            </div>
        </div>

        <!-- Tire Set Details Section -->
        <div class="app-section" data-section-content="tire-set-details">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;">
                <button class="btn" onclick="backToTireHistory()">‚Üê Back to Tire Sets</button>
                <span id="tire-set-details-info" style="color: rgba(230,238,246,0.9); font-size: 1.1rem;"></span>
            </div>
            <div class="section-content">
                <button class="btn primary" id="add-tire-btn" style="margin-bottom: 16px;">Add Tire</button>
                <div id="tires-list" style="position: relative; z-index: 1;"></div>
            </div>
        </div>

        <!-- Add Tire Section -->
        <div class="app-section" data-section-content="add-tire">
            <button class="btn" onclick="backToSetDetails()" style="margin-bottom: 16px;">‚Üê Back to Set</button>
            <h2>Add Tire</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="tire-name-input">Tire Label/Name:</label>
                    <input type="text" id="tire-name-input" class="setup-input" placeholder="e.g., LF #1, RR Main, Front Left..." style="max-width: 100%; margin-top: 8px;">
                    <button class="btn primary" id="confirm-add-tire-btn" style="margin-top: 16px;">Add Tire</button>
                </div>
            </div>
        </div>

        <!-- Individual Tire Details Section -->
        <div class="app-section" data-section-content="tire-details">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;">
                <button class="btn" onclick="backToSetDetails()">‚Üê Back to Set</button>
                <span id="tire-details-info" style="color: rgba(230,238,246,0.9); font-size: 1.1rem;"></span>
            </div>
            <div class="section-content">
                <button class="btn primary" id="add-event-btn" style="margin-bottom: 16px;">Add Event</button>
                <div id="tire-events-list" style="position: relative; z-index: 1;"></div>
            </div>
        </div>

        <!-- View Event Section -->
        <div class="app-section" data-section-content="view-event">
            <button class="btn" onclick="backToTireDetails()" style="margin-bottom: 16px;">‚Üê Back to Tire</button>
            <h2 id="view-event-title">Event Details</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <div id="view-event-content"></div>
                </div>
            </div>
        </div>

        <!-- Edit Event Section -->
        <div class="app-section" data-section-content="edit-event">
            <button class="btn" onclick="backToTireDetails()" style="margin-bottom: 16px;">‚Üê Back to Tire</button>
            <h2>Edit Event</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="edit-outer-chemical-input">Outer Chemical Applied:</label>
                    <input type="text" id="edit-outer-chemical-input" class="setup-input" placeholder="e.g., Goat Pee, Simple Green, PRW..." style="max-width: 100%; margin-top: 8px;">
                    <label for="edit-outer-amount-input" style="margin-top:12px;display:block;">Outer Amount:</label>
                    <input type="text" id="edit-outer-amount-input" class="setup-input" placeholder="e.g., 2 oz, 50ml, 3 coats..." style="max-width: 100%; margin-top: 8px;">
                    <label for="edit-inner-chemical-input" style="margin-top:12px;display:block;">Inner Chemical Applied:</label>
                    <input type="text" id="edit-inner-chemical-input" class="setup-input" placeholder="e.g., Goat Pee, Simple Green, PRW..." style="max-width: 100%; margin-top: 8px;">
                    <label for="edit-inner-amount-input" style="margin-top:12px;display:block;">Inner Amount:</label>
                    <input type="text" id="edit-inner-amount-input" class="setup-input" placeholder="e.g., 2 oz, 50ml, 3 coats..." style="max-width: 100%; margin-top: 8px;">
                    <label for="edit-description-input" style="margin-top:12px;display:block;">Description (Optional):</label>
                    <textarea id="edit-description-input" class="setup-input" placeholder="Additional details..." style="max-width: 100%; margin-top: 8px; min-height: 80px; resize: vertical;"></textarea>
                    <button class="btn primary" id="confirm-edit-event-btn" style="margin-top: 16px;">Update Event</button>
                </div>
            </div>
        </div>

        <!-- Add Event Section -->
        <div class="app-section" data-section-content="add-event">
            <button class="btn" onclick="backToTireDetails()" style="margin-bottom: 16px;">‚Üê Back to Tire</button>
            <h2>Add Event</h2>
            <div class="section-content">
                <div style="background: rgba(230,238,246,0.05); border: 1px solid rgba(230,238,246,0.15); border-radius: 8px; padding: 24px;">
                    <label for="outer-chemical-input">Outer Chemical Applied:</label>
                    <input type="text" id="outer-chemical-input" class="setup-input" placeholder="e.g., Goat Pee, Simple Green, PRW..." style="max-width: 100%; margin-top: 8px;">
                    <label for="outer-amount-input" style="margin-top:12px;display:block;">Outer Amount:</label>
                    <input type="text" id="outer-amount-input" class="setup-input" placeholder="e.g., 2 oz, 50ml, 3 coats..." style="max-width: 100%; margin-top: 8px;">
                    <label for="inner-chemical-input" style="margin-top:12px;display:block;">Inner Chemical Applied:</label>
                    <input type="text" id="inner-chemical-input" class="setup-input" placeholder="e.g., Goat Pee, Simple Green, PRW..." style="max-width: 100%; margin-top: 8px;">
                    <label for="inner-amount-input" style="margin-top:12px;display:block;">Inner Amount:</label>
                    <input type="text" id="inner-amount-input" class="setup-input" placeholder="e.g., 2 oz, 50ml, 3 coats..." style="max-width: 100%; margin-top: 8px;">
                    <label for="description-input" style="margin-top:12px;display:block;">Description (Optional):</label>
                    <textarea id="description-input" class="setup-input" placeholder="Additional details..." style="max-width: 100%; margin-top: 8px; min-height: 80px; resize: vertical;"></textarea>
                    <div style="margin-top: 16px; display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="apply-to-all-tires" style="width: auto; cursor: pointer;">
                        <label for="apply-to-all-tires" style="margin: 0; cursor: pointer; color: rgba(230,238,246,0.9);">Apply to all tires in set</label>
                    </div>
                    <button class="btn primary" id="confirm-add-event-btn" style="margin-top: 16px;">Add Event</button>
                </div>
            </div>
        </div>

        <!-- Saved Builds Section -->
        <div class="app-section" data-section-content="saved">
            <h2>Saved Builds</h2>
            <p>Manage and load your favorite kart configurations.</p>
            <div class="section-content">
                <div id="saved-builds-list"></div>
            </div>
        </div>
    </main>

    <footer class="site-footer app-footer">
        <small>&copy; 2025 Racer Ready</small>
    </footer>

    <!-- Save Build Modal -->
    <div class="modal-overlay" id="save-build-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üíæ Save Build</h3>
                <button class="modal-close" onclick="closeSaveBuildModal()">&times;</button>
            </div>
            <div class="modal-body">
                <label for="build-name-input">Build Name:</label>
                <input type="text" id="build-name-input" class="setup-input" placeholder="Enter a name for your build..." style="max-width: 100%; margin-top: 8px;">
                <p style="font-size: 0.85rem; color: rgba(230,238,246,0.6); margin-top: 12px;">
                    This will save all current settings and configurations.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeSaveBuildModal()" style="background: rgba(255,255,255,0.05);">Cancel</button>
                <button class="btn primary" onclick="confirmSaveBuild()">Save Build</button>
            </div>
        </div>
    </div>

    <!-- Prompt Modal -->
    <div class="modal-overlay" id="prompt-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="prompt-modal-title">Input</h3>
                <button class="modal-close" onclick="closePromptModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="prompt-modal-message"></p>
                <input type="text" id="prompt-modal-input" class="setup-input" style="max-width: 100%; margin-top: 12px;" placeholder="Enter value...">
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closePromptModal(null)" style="background: rgba(255,255,255,0.05);">Cancel</button>
                <button class="btn primary" onclick="closePromptModal(document.getElementById('prompt-modal-input').value)">OK</button>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
    <div class="modal-overlay" id="alert-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="alert-modal-title">Alert</h3>
                <button class="modal-close" onclick="closeAlertModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p id="alert-modal-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn primary" onclick="closeAlertModal()">OK</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal-overlay" id="confirm-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirm-modal-title">‚ùì Confirm</h3>
                <button class="modal-close" onclick="closeConfirmModal(false)">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeConfirmModal(false)">Cancel</button>
                <button class="btn primary" onclick="closeConfirmModal(true)">OK</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, getDoc, deleteDoc, updateDoc, setDoc, doc, query, where, orderBy, Timestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, signOut, onAuthStateChanged, updateEmail, updatePassword, reauthenticateWithCredential, EmailAuthProvider } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBi_oZtWxAvLa3aKeb_u1L_Gg31Bbf9u-A",
            authDomain: "racerready-a70d1.firebaseapp.com",
            projectId: "racerready-a70d1",
            storageBucket: "racerready-a70d1.firebasestorage.app",
            messagingSenderId: "101209144078",
            appId: "1:101209144078:web:133e745dd019211e63f55f"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Make Firebase functions available globally
        window.firebaseDb = db;
        window.firebaseAuth = auth;
        window.firebaseCollection = collection;
        window.firebaseAddDoc = addDoc;
        window.firebaseGetDocs = getDocs;
        window.firebaseGetDoc = getDoc;
        window.firebaseDeleteDoc = deleteDoc;
        window.firebaseUpdateDoc = updateDoc;
        window.firebaseSetDoc = setDoc;
        window.firebaseDoc = doc;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
        window.firebaseOrderBy = orderBy;
        window.firebaseTimestamp = Timestamp;
        window.firebaseSignOut = signOut;
        window.firebaseUpdateEmail = updateEmail;
        window.firebaseUpdatePassword = updatePassword;
        window.firebaseReauthenticateWithCredential = reauthenticateWithCredential;
        window.firebaseEmailAuthProvider = EmailAuthProvider;

        // Auth state listener - redirect to sign.html if not logged in
        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                window.location.href = 'sign.html';
            } else {
                window.currentUser = user;
                // Load and update avatar
                const avatarEl = document.querySelector('.avatar');
                if (avatarEl && user.email) {
                    try {
                        // Try to load profile picture from Firestore
                        const userDocRef = doc(db, 'users', user.uid);
                        const userDoc = await getDoc(userDocRef);
                        
                        if (userDoc.exists() && userDoc.data().profilePicture) {
                            // Create img element for profile picture
                            avatarEl.innerHTML = '';
                            const img = document.createElement('img');
                            img.src = userDoc.data().profilePicture;
                            img.style.width = '100%';
                            img.style.height = '100%';
                            img.style.borderRadius = '50%';
                            img.style.objectFit = 'cover';
                            avatarEl.appendChild(img);
                        } else {
                            // Use initials if no profile picture
                            const displayName = userDoc.exists() && userDoc.data().displayName 
                                ? userDoc.data().displayName 
                                : user.email;
                            const initials = displayName.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
                            avatarEl.textContent = initials;
                        }
                    } catch (error) {
                        console.error('Error loading profile picture:', error);
                        // Fallback to initials
                        const initials = user.email.substring(0, 2).toUpperCase();
                        avatarEl.textContent = initials;
                    }
                }
            }
        });
    </script>
    <script src="script.js"></script>
</body>

</html>